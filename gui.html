<html>
  <head>
    <script type="text/javascript" src="Assembler/ARMv4T.Assembler.js"></script>
    <script type="text/javascript" src="Assembler/ARMv4T.Assembler.Symbols.js"></script>
    <script type="text/javascript" src="Assembler/ARMv4T.Assembler.Sections.js"></script>
    <script type="text/javascript" src="Assembler/ARMv4T.Assembler.Litpools.js"></script>
		<script type="text/javascript" src="Simulator/ARM.Simulator.Vm.js"></script>
		<script type="text/javascript" src="Simulator/ARM.Simulator.Cpu.js"></script>
		<script type="text/javascript" src="Simulator/ARM.Simulator.Cpu.Instructions.js"></script>
		<script type="text/javascript" src="Simulator/ARM.Simulator.Cpu.Cpsr.js"></script>
		<script type="text/javascript" src="Simulator/ARM.Simulator.Memory.js"></script>
		<script type="text/javascript" src="Simulator/ARM.Simulator.Loader.js"></script>
		<script type="text/javascript" src="Simulator/ARM.Simulator.Loader.BinaryReader.js"></script>
		<script type="text/javascript" src="Simulator/ARM.Simulator.Device.Console.js"></script>
    <script type="text/javascript" src="Assets/js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="Assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="Assets/js/codemirror.js"></script>
    <script type="text/javascript" src="Assets/js/z80.js"></script>
    <script type="text/javascript" src="Assets/js/gui.js"></script>
    <script type="text/javascript" src="Assets/js/devboard.js"></script>
    <link rel="stylesheet" href="Assets/css/codemirror.css" />
    <link rel="stylesheet" href="Assets/css/codemirror.css" />
    <link rel="stylesheet" href="Assets/css/hopscotch.css" />
    <link rel="stylesheet" href="Assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="Assets/css/gui.css" />
  </head>
  <body>
    <div id="editor"></div>
    <div id="buttons">
      <button id="assemble" class="btn btn-success">Assemble Input</button>
      <button id="image" class="btn btn-info">Load ELF Image</button>
      <button id="run" class="btn btn-danger" disabled="disabled" data-toggle="modal" data-target="#runProgramModal">Run Program</button>
    </div>
    <div id="status"></div>

    <div id="some-code">.arm
.section .data
hello:
    .asciz "Hello World"
.section .text
.equ    CON_BASE, 0x60000000
.equ    CON_CTL,  0x60000001
.equ    RAM_Size, 0x00001000
.equ    RAM_Base, 0x00040000
.equ    TopStack, RAM_Base + RAM_Size
ldr  r0,  =TopStack
mov  r13, r0  @ R13 acts as stack pointer by convention

Main:
ldr r0, =hello
b _printf

@ IN(r0) -> address of null-terminated string
_printf:
  stmfd sp!, {r1-r3}
  ldr r2, =CON_BASE
  while:
    ldrb r1, [r0], #1
    cmp r1, #0
    beq end_while
@    strb r1, [r2]
    b while
  end_while:
  ldr r2, =CON_CTL
  mov r3, #1
  strb r3, [r2]
  ldmfd sp!, {r1-r3}
  bx lr 
.end</div>

    <!-- RunProgram Modal -->
    <div id="runProgramModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Virtual Machine</h4>
          </div>
          <div class="modal-body">
            <table id="cpu-regs">
              <thead>
                <tr>
                  <td class="cpu-reg">Register</td>
                  <td class="cpu-reg-val">Value</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td></td>
                </tr>
              </tbody>
            </table>
            <div style="display:inline-table">
            <table id="cpu-cpsr">
              <thead>
                <tr>
                  <td class="cpu-reg">CPSR</td>
                  <td class="cpu-reg-val">Value</td>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
            <table id="cpu-inst">
              <thead>
                <tr>
                  <td>INST</td>
                  <td>Value</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="cpu-reg" id="instr-grp"></td>
                  <td id="instr-val"></td>
                </tr>
              </tbody>
            </table>
            </div>
          </div>
          <div class="modal-footer">
            <button id="reset-vm" type="button" class="btn btn-default">Reset VM</button>
            <button id="single-step" type="button" class="btn btn-warning">Single-Step</button>
            <button type="button" class="btn btn-success">Execute</button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>